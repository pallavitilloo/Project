{% extends "ELearn/layout.html" %}
{% block title %}
{% endblock %}
{% block content %}
{% load static %}



<div class="container">
    <div class="row">
        <div class="col">
            <small><a href="{% url 'home' %}">Back to home</a></small>
        </div>
    </div>
    <br/>
    <div class="row">
        <div class="col-9">
          <a href="{% url 'coursedetail' course_id=course.course_id %}" id='{{course.course_id}}'><h3>{{course.course_id}} {{course.course_name}}</h3></a>
        </div>
        <div class="col-3 text-right">
            <a href="{% url 'createmodule' course_id=course.course_id %}" id = '{{course.course_id}}'>Create Module ></a>
        </div>
    </div>
    
    <hr/>

    {% for module in modules %}
    <div class="accordion" id="accordionExample">        
        <div class="card">
          <div class="card-header" id="heading_{{module.module_id}}">
            <div class="row">
              <div class="col-9">
                <h5 class="mb-0">
                  {% if module.module_type == 'CW' %}
                      <!-- Course Work -->                        
                      <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#{{module.module_id}}" aria-expanded="true" aria-controls="{{module.module_id}}">
                        <i class="fas fa-folder"></i>
                      </button>
                      <a href="{% url 'modulehome' module_id=module.module_id %}"">{{ module.module_name }}</a>
                  {% elif module.module_type == 'PT' %}
                      <!-- Project -->
                      <i class="fas fa-project-diagram"></i>
                      <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#{{module.module_id}}" aria-expanded="true" aria-controls="{{module.module_id}}">
                        Project : {{ module.module_name }}
                      </button>
                  {% elif module.module_type == 'AT' %}
                      <!-- Assignment -->
                      <i class="fas fa-tasks"></i>
                      <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#{{module.module_id}}" aria-expanded="true" aria-controls="{{module.module_id}}">
                        Assignment : {{ module.module_name }}
                      </button>
                  {% else %}
                      <!-- Assessment -->
                      
                      <!-- <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#{{module.module_id}}" aria-expanded="true" aria-controls="{{module.module_id}}"> -->
                        <a href="{% url 'assessmenthome' module_id=module.module_id %}"><i class="fas fa-rocket"></i> {{ module.module_name }}</a>
                      <!-- </button> -->
                  {% endif %}
                </h5>
              </div>              
            </div>
          </div>  
          {% if module.module_type == 'CW' %}
          <div id="{{module.module_id}}" class="collapse show" aria-labelledby="heading_{{module.module_id}}">
            <!-- data-parent="#accordionExample" -->
            <div class="card-body">              
                {% for topic in topics %}
                   {% if topic.module.module_id == module.module_id%}
                    <div class="row">
                      <div class="col">
                        {% if topic.topic_file == '' %}                                   
                          <i class="fas fa-link tealColored"></i>&nbsp;
                          <a target="_blank" class="tealLink" href="{{ topic.topic_url }}">{{ topic.topic_url}} </a>                        
                        {% else %}                                        
                            {% if topic.find_typecheck == 'VALID' %}
                              <i class="fas fa-glasses tealColored"></i>&nbsp;
                              <a class="tealLink" href="../opendocument/{{ topic.topic_file }}">{{ topic.topic_url}} </a>
                            {% else %}
                              <i class="fas fa-paperclip tealColored"></i>&nbsp;
                              <a class="tealLink" href="../media/{{ topic.topic_file }}">{{ topic.topic_url}} </a>                        
                            {% endif %}
                        {% endif %}
                      </div> 
                    </div>  
                    <br/>                              
                   {% endif %}
                {% endfor %}                
                <div class="row">
                  <div class="col text-right">                
                      <a href="{% url 'createtopic' module_id=module.module_id %}" title="Add Topic"><i class="fas fa-plus-square"></i></a>
                  </div>
                </div>                
              </div>   <!-- End of CARD Body -->                
          </div>
          {% endif %}
        </div>    <!-- End of CARD -->
        <hr/>
      </div>      <!-- End of Accordion -->        
    <br/>
    {% endfor %}
</div>
                         
{% endblock %}